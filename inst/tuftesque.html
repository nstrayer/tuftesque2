<html>


  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
    <meta charset="UTF-8">

    <link rel="stylesheet" href="$css$" $if(html5)$$else$type="text/css" $endif$/>

    <title>$title$</title>
  </head>

  <body>
    <div class = 'intro'>
      $if(title)$
    <h1 class="title toc-ignore">$title$</h1>
    $if(subtitle)$
    <h3 class="subtitle">$subtitle$</h3>
    $endif$
    $for(author)$
    $if(author.name)$
    <h4 class="author">$author.name$</h4>
    $if(author.affiliation)$
    <address class="author_afil">
    $author.affiliation$<br>$endif$
    $if(author.email)$
    <a class="author_email" href="mailto:#">$author.email$</a>
    </address>
    $endif$
    $else$
    <h4 class="author">$author$</h4>
    $endif$
    $endfor$
    $if(date)$
    <h4 class="date">$date$</h4>
    $endif$
    $if(abstract)$
    <div class="abstract">
    <p class="abstract">Abstract</p>
    $abstract$
    </div>
    $endif$
    $endif$
    </div>

    <div class = 'all_content'><div class = 'container'>
$body$
    </div></div>

    <script>
    window.onload = function () {

      const selection_switcher = function(event){
        const element_classes = this.classList;

        // This stops us from triggering the click event on the
        // sidenote div when we click the lightbox div to avoid
        // an ugly double animation of opening the sidebox.
        event.stopPropagation();

        if(element_classes.contains('selected')){
          element_classes.remove('selected');
        } else {
          element_classes.add('selected');
        }
      }

      const side_notes = document.getElementsByClassName('side-note');
      for (let note of side_notes) {
        note.addEventListener("click", selection_switcher);
      }

      const lightboxes = document.getElementsByClassName('lightbox');
      for (let box of lightboxes) {
        box.addEventListener("click", selection_switcher);
      }

    }
  </script>

  </body>
</html>

